(function(){var patrolledMsg='Marked as patrolled';$(document.body).on('click','.patrollink > a[href]',function(e){var $patrolLink=$(this),url=new mw.Uri($patrolLink.attr('href'));if(url.host!==location.hostname||url.query.action!=='markpatrolled'){return;}e.preventDefault();$patrolLink.html('<img src="//images.wikia.nocookie.net/dev/images/8/82/Facebook_throbber.gif" style="vertical-align: baseline;" border="0" />');$.ajax(url.toString(),{dataType:'text'}).done(function(){$patrolLink.removeAttr('href').css('color','grey').text(patrolledMsg);});});mw.hook('dev.i18n').add(function(i18no){i18no.loadMessages('AjaxPatrol').then(function(i18n){patrolledMsg=i18n.msg('patrolled').plain();});});importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});})();;;(function(module,mw,$,undefined){'use strict';var translations=$.extend(true,{ar:{and:'و',second:'ثانية',seconds:'ثواني',minute:'دقيقة',minutes:'دقائق',hour:'ساعة',hours:'ساعات',day:'يوم',
days:'أيام'},be:{and:'і',second:'секунда',seconds:'секунд',minute:'хвіліна',minutes:'хвілін',hour:'гадзіну',hours:'гадзін',day:'дзень',days:'дзён'},ca:{and:'i',second:'segon',seconds:'segons',minute:'minut',minutes:'minuts',hour:'hora',hours:'hores',day:'dia',days:'dies'},de:{and:'und',second:'Sekunde',seconds:'Sekunden',minute:'Minute',minutes:'Minuten',hour:'Stunde',hours:'Stunden',day:'Tag',days:'Tage'},en:{and:'and',second:'second',seconds:'seconds',minute:'minute',minutes:'minutes',hour:'hour',hours:'hours',day:'day',days:'days'},el:{and:'και',second:'δευτερόλεπτο',seconds:'δευτερόλεπτα',minute:'λεπτό',minutes:'λεπτά',hour:'ώρα',hours:'ώρες',day:'ημέρα',days:'ημέρες'},es:{and:'y',second:'segundo',seconds:'segundos',minute:'minuto',minutes:'minutos',hour:'hora',hours:'horas',day:'día',days:'días'},fr:{and:'et',second:'seconde',seconds:'secondes',minute:'minute',minutes:
'minutes',hour:'heure',hours:'heures',day:'jour',days:'jours'},hu:{and:'és',second:'másodperc',seconds:'másodperc',minute:'perc',minutes:'perc',hour:'óra',hours:'óra',day:'nap',days:'nap'},id:{and:'dan',second:'detik',seconds:'detik',minute:'menit',minutes:'menit',hour:'jam',hours:'jam',day:'hari',days:'hari'},it:{and:'e',second:'secondo',seconds:'secondi',minute:'minuto',minutes:'minuti',hour:'ora',hours:'ore',day:'giorno',days:'giorni'},ja:{and:'',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'時間',hours:'時間',day:'日',days:'日'},ko:{and:' ',second:'초',seconds:'초',minute:'분',minutes:'분',hour:'시간',hours:'시간',day:'일',days:'일'},ms:{and:'dan',second:'saat',seconds:'saat',minute:'minit',minutes:'minit',hour:'jam',hours:'jam',day:'hari',days:'hari'},nl:{and:'en',second:'seconde',seconds:'seconden',minute:'minuut',minutes:'minuten',hour:'uur',hours:'uur',day:'dag',days:'dagen'},pl:{and:'i',second:'sekunda',seconds:'sekund(y)',minute:'minuta',
minutes:'minut(y)',hour:'godzina',hours:'godzin(y)',day:'dzień',days:'dni'},pt:{and:'e',second:'segundo',seconds:'segundos',minute:'minuto',minutes:'minutos',hour:'hora',hours:'horas',day:'dia',days:'dias'},'pt-br':{and:'e',second:'segundo',seconds:'segundos',minute:'minuto',minutes:'minutos',hour:'hora',hours:'horas',day:'dia',days:'dias'},ro:{and:'și',second:'secundă',seconds:'secunde',minute:'minut',minutes:'minute',hour:'oră',hours:'ore',day:'zi',days:'zile',},ru:{and:'и',second:'секунда',seconds:'секунд',minute:'минута',minutes:'минут',hour:'час',hours:'часов',day:'день',days:'дней'},sr:{and:'i',second:'sekundu',seconds:'sekunde/-i',minute:'minutu',minutes:'minute/-a',hour:'sat',hours:'sata/-i',day:'dan',days:'dana'},tl:{and:'at',second:'segundo',seconds:'mga segundo',minute:'minuto',minutes:'mga minuto',hour:'oras',hours:'mga oras',day:'araw',days:'mga araw'},tr:{and:'ve',second:'saniye',seconds:'saniye',minute:'dakika',minutes:
'dakika',hour:'saat',hours:'saat',day:'gün',days:'gün'},uk:{and:'та',second:'секунда',seconds:'секунд',minute:'хвилина',minutes:'хвилин',hour:'годину',hours:'годин',day:'день',days:'днів'},vi:{and:'và',second:'giây',seconds:'giây',minute:'phút',minutes:'phút',hour:'giờ',hours:'giờ',day:'ngày',days:'ngày'},zh:{and:' ',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'时',hours:'时',day:'天',days:'天'},'zh-tw':{and:' ',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'時',hours:'時',day:'天',days:'天'},'zh-hk':{and:' ',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'時',hours:'時',day:'天',days:'天'}},module.translations||{}),i18n=translations[mw.config.get('wgContentLanguage')]||translations.en;var countdowns=[];var NO_LEADING_ZEROS=1,SHORT_FORMAT=2,NO_ZEROS=4;function output(i,diff){var delta,result,parts=[];delta=diff%60;result=' '+i18n[delta===1?'second':'seconds'];if(countdowns[i]
.opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(delta+result);diff=Math.floor(diff/60);delta=diff%60;result=' '+i18n[delta===1?'minute':'minutes'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(delta+result);diff=Math.floor(diff/60);delta=diff%24;result=' '+i18n[delta===1?'hour':'hours'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(delta+result);diff=Math.floor(diff/24);result=' '+i18n[diff===1?'day':'days'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(diff+result);result=parts.pop();if(countdowns[i].opts&NO_LEADING_ZEROS){while(parts.length&&parts[0][0]==='0'){parts.shift();}}if(countdowns[i].opts&NO_ZEROS){parts=parts.filter(function(part){return part[0]!=='0';});}if(parts.length){if(countdowns[i].opts&SHORT_FORMAT){result=parts.join(' ')+' '+result;}else{result=parts.join(', ')+' '+i18n.and+' '+result;}}countdowns[i].node.text(result);}function end(i){var c=countdowns[i].node.parent();switch(c
.attr('data-end')){case'remove':c.remove();return true;case'stop':output(i,0);return true;case'toggle':var toggle=c.attr('data-toggle');if(toggle&&toggle=='next'){c.next().css('display','inline');c.css('display','none');return true;}if(toggle&&$(toggle).length){$(toggle).css('display','inline');c.css('display','none');return true;}break;case'callback':var callback=c.attr('data-callback');if(callback&&$.isFunction(module[callback])){output(i,0);module[callback].call(c);return true;}break;}countdowns[i].countup=!0;output(i,0);return false;}function update(){var now=Date.now();var countdownsToRemove=[];$.each(countdowns.slice(0),function(i,countdown){var diff=Math.floor((countdown.date-now)/1000);if(diff<=0&&!countdown.countup){if(end(i))countdownsToRemove.push(i);}else{output(i,Math.abs(diff));}});var x;while((x=countdownsToRemove.pop())!==undefined){countdowns.splice(x,1);}if(countdowns.length){window.setTimeout(function(){update();},1000);}}function getOptions(node){var text=node.
parent().attr('data-options'),opts=0;if(text){if(/no-leading-zeros/.test(text)){opts|=NO_LEADING_ZEROS;}if(/short-format/.test(text)){opts|=SHORT_FORMAT;}if(/no-zeros/.test(text)){opts|=NO_ZEROS;}}return opts;}function init(){var countdown=$('.countdown:not(.handled)');if(!countdown.length)return;$('.nocountdown').css('display','none');countdown.css('display','inline').find('.countdowndate').each(function(){var $this=$(this),date=(new Date($this.text())).valueOf();if(isNaN(date)){$this.text('BAD DATE');return;}countdowns.push({node:$this,opts:getOptions($this),date:date,});});countdown.addClass('handled');if(countdowns.length){update();}}mw.hook('wikipage.content').add(init);}(window.countdownTimer=window.countdownTimer||{},mediaWiki,jQuery));;(function(module,$,mw){'use strict';if(!$('#UserProfileMasthead').exists()||window.InactiveUsersLoaded){return;}window.InactiveUsersLoaded=!0;if(!Date.prototype.toISOString)Date.prototype.toISOString=function(){function pad(s){return(s+='').
length<2?'0'+s:s;}return this.getUTCFullYear()+'-'+pad(this.getUTCMonth()+1)+'-'+pad(this.getUTCDate())+'T'+pad(this.getUTCHours())+':'+pad(this.getUTCMinutes())+':'+pad(this.getUTCSeconds())+'.'+(this.getUTCMilliseconds()/1000).toFixed(3).substr(-3)+'Z';};function isoDateNDaysAgo(days){return new Date(Date.now()-days*24*60*60*1000).toISOString();}module=$.extend({text:'inactive',gone:[],months:3},module);var user=$('#UserProfileMasthead h1[itemprop="name"]').text();mw.loader.using('mediawiki.api').then(function(){new mw.Api().get({action:'query',list:'usercontribs|users',uclimit:1,ucprop:'title|timestamp',ucuser:user,ucstart:isoDateNDaysAgo(0),ucend:isoDateNDaysAgo(30*Math.max(parseInt(module.months,10)||1,1)),ususers:user,usprop:'gender'}).done(function(result){if(result&&result.query&&result.query.users&&result.query.users[0]&&((result.query.usercontribs&&!result.query.usercontribs.length)||module.gone.indexOf(user)!==-1)){var gender=result.query.users[0].gender||'unknown',
$container=$('#UserProfileMasthead hgroup'),css=$container.find('.tag').length?{marginLeft:'10px'}:{},text=typeof module.text==='string'?module.text:typeof module.text==='object'?typeof module.text[gender]==='string'?module.text[gender]:module.text.unknown:'inactive';$container.append($('<span>',{'class':'tag inactive-user','css':css,text:text}));mw.hook('dev.inactiveusers').fire();}});});}(window.InactiveUsers=window.InactiveUsers||{},jQuery,mediaWiki));;(function($,mw){'use strict';var conf=mw.config.get(['debug','wgAction','wgCanonicalSpecialPageName','wgNamespaceNumber','wgTitle','wgUserName']),noHideTags=!!((window.dev||{}).profileTags||{}).noHideTags;function hideTags($masthead){var $tags=$masthead.find('.tag');$tags.hide();}function getTagClass(tag){var tagClass='tag-'+tag.toLowerCase().replace(/\s/g,'_');return tagClass;}function getLinkTag($span,tag){var re=/\[\[(.+?)\|(.+?)\]\]/,match=re.exec(tag),href=mw.util.wikiGetlink(match[1]),text=match[2],$a=$('<a>').attr('href',href).
css('color','inherit').text(text);$span.addClass(getTagClass(tag)).append($a);return $span;}function addProfileTags(tags){var $masthead=$('.UserProfileMasthead hgroup'),linkTestRe=/\[\[.+?\|.+?\]\]/;if(!noHideTags){hideTags($masthead);}tags.forEach(function(tag){var $span=$('<span>').addClass('tag');if(linkTestRe.test(tag)){$span=getLinkTag($span,tag);}else{$span.addClass(getTagClass(tag)).text(tag);}$masthead.append($span,' ');});mw.hook('dev.profile-tags').fire();}function getUserName(){var user=conf.wgTitle,target=$.getUrlVar('target'),parts;if(conf.wgCanonicalSpecialPageName==='Contributions'){parts=user.split('/');if(parts.length===2){user=parts[1];}else if(target){user=decodeURIComponent(target).replace(/_/g,' ');}else{user=conf.wgUserName;if(user===null){user='';}}}return user;}function getUserTags(){var params={action:'raw',title:'MediaWiki:ProfileTags'};if(conf.debug){params.maxage=0;params.smaxage=0;}$.get(mw.util.wikiScript(),params,function(data){if(!data.length){return;}if
(/^#!nohide/.test(data)){noHideTags=!0;}var user=$.escapeRE(getUserName()),re=new RegExp('(?:^|\\n)\\s*'+user+'\\s*\\|\\s*(.*?)\\s*(?:\\n|$)'),match=re.exec(data),tags;if(match===null){return;}tags=match[1].split(/\s*,\s*/);if(tags.length){addProfileTags(tags);}});}function init(){if($('.UserProfileMasthead').length){mw.loader.using(['mediawiki.util','site'],getUserTags);}}$(init);}(jQuery,mediaWiki));;(function($,mw,RevealAnonIP,ArticleComments,WikiActivity){"use strict";RevealAnonIP=$.extend(RevealAnonIP,{});RevealAnonIP.permissions=$.extend(['*'],RevealAnonIP.permissions);if(typeof(RevealAnonIP.reveal)==='function'){return;}var hasPermission=(function(){var permissions=RevealAnonIP.permissions;var usergroups;usergroups=mw.config.get('wgUserGroups');usergroups=$.extend(['*'],usergroups);for(var i=0,plen=permissions.length;i<plen;++i){for(var j=0,ulen=usergroups.length;j<ulen;++j){if(usergroups[j]===permissions[i]){return true;}}}return false;}());function revealIPs(){if(!
hasPermission){return;}var isIPv4Address=mw.util.isIPv4Address,isIPv6Address=mw.util.isIPv6Address;$('.edited-by > a').not('#Wall *').add($('#Forum .last-post > a').filter(function(){return!this.children.length;})).add('.activityfeed cite a, .activity-module .edit-info-user').each(function(){var $this=$(this),href=$this.attr('href'),lastSlash=href.lastIndexOf('/'),ip;if(lastSlash!==-1){ip=href.substr(lastSlash+1);if(isIPv4Address(ip)||isIPv6Address(ip)){$this.text(ip);}}});}RevealAnonIP.reveal=$.noop;RevealAnonIP.getPermission=function(){return hasPermission;};RevealAnonIP.init=function(){hasPermission=!0;mw.loader.using('mediawiki.util',function(){RevealAnonIP.reveal=revealIPs;$(function(){if(ArticleComments){var realFunc=ArticleComments.addHover;ArticleComments.addHover=function(){var result=realFunc.apply(this,arguments);RevealAnonIP.reveal();return result;};}else{if(WikiActivity){var ajaxFunc=WikiActivity.ajax;WikiActivity.ajax=function(a,b,callback){return ajaxFunc.call(this,a,b
,function(){var result=callback.apply(this,arguments);RevealAnonIP.reveal();return result;});};}if(!$.isArray(window.ajaxCallAgain)){window.ajaxCallAgain=[];}window.ajaxCallAgain.push(RevealAnonIP.reveal);}RevealAnonIP.reveal();});});this.init=$.noop;};if(hasPermission){RevealAnonIP.init();}window.RevealAnonIP=RevealAnonIP;}(jQuery,mediaWiki,window.RevealAnonIP,window.ArticleComments,window.WikiActivity));;(function(){'use strict';var mconfig=mw.config.get(['wgUserLanguage','wgUserName']);if(window.DiscordIntegratorLoaded){return;}window.DiscordIntegratorLoaded=!0;var DiscordIntegrator={config:(window.DiscordIntegratorConfig||{}).siderail||{},hook:function(i18n){$.when(i18n.loadMessages('DiscordIntegrator'),mw.loader.using('mediawiki.api')).then($.proxy(this.preload,this));},preload:function(i18n){this.i18n=i18n;mw.hook('wikipage.content').add($.proxy(this.insertToContent,this));this.api=new mw.Api();this.api.get({action:'query',meta:'allmessages',ammessages:['id','title',
'moduleHeight','theme','width','height','text','logged-in','footer','username'].map(function(el){return'Custom-DiscordIntegrator-config-'+el;}).join('|'),amlang:mconfig.wgUserLanguage,smaxage:300,maxage:300}).done($.proxy(function(d){if(!d.error){d.query.allmessages.forEach(function(el){if(el['*']){this.config[el.name.substring(32)]=el['*'];}},this);this._loading=0;['text','title','footer'].forEach(this.parse,this);if(this._loading===0){this.init();}}},this));},parse:function(msg){if(this.config[msg]){++this._loading;this.api.get({action:'parse',text:this.config[msg]}).done($.proxy(function(d){if(!d.error){this.config[msg]=d.parse.text['*'];if(--this._loading===0){this.init();}}},this));}},init:function(){if(this.config.id&&$('#WikiaRail').length>0){var clas=$('#WikiaRail').attr('class');if(clas&&clas.split(/\s+/).indexOf('loaded')===-1){$('#WikiaRail').on('afterLoad.rail',$.proxy(this.insertToSiderail,this));}else{this.insertToSiderail();}}},insertToSiderail:function(){var filter=$(
'#top-right-boxad-wrapper, #top-boxad-wrapper, #NATIVE_TABOOLA_RAIL, .content-review-module').last(),el=$('<div>',{class:'DiscordIntegratorModule rail-module'});if(this.config.title){el.append($('<h2>',{'class':'activity-heading',html:this.config.title}));}if(this.config.text){el.append($('<p>',{id:'DiscordIntegratorModuleText',html:this.config.text}));}el.append(this.generateContent(this.config));if(this.config.footer){el.append($('<p>',{id:'DiscordIntegratorModuleFooter',html:this.config.footer}));}if(filter.length>0){el.insertAfter(filter);}else{$('#WikiaRail').prepend(el);}if(this.config.moduleHeight){mw.util.addCSS('.DiscordIntegratorModule { height: '+Number(this.config.moduleHeight)+'px; }');}mw.hook('DiscordIntegrator.added').fire(el);},insertToContent:function($content){$content.find('.DiscordIntegrator:not(.loaded)').each($.proxy(function(cabbage,el){el=$(el);el.html(this.generateContent(el.data())).addClass('loaded');},this));},generateContent:function(config){return config.
id?((config.loggedIn===true||(Boolean(config['logged-in'])===true&&config['logged-in']!=='false'&&config['logged-in']!=='{{{loggedIn}}}'))&&!mconfig.wgUserName)?this.i18n.msg('login').parse():mw.html.element('iframe',{src:'https://discordapp.com/widget?id='+config.id+'&theme='+(config.theme==='light'?'light':'dark')+'&username='+encodeURIComponent(config.username==='@disabled'?'':config.username==='@function'&&typeof window.DiscordIntegratorGetUsername==='function'?window.DiscordIntegratorGetUsername():config.username||mconfig.wgUserName),width:config.width||'100%',height:config.height||'400px',allowtransparency:'true',frameborder:'0'}):this.i18n.msg('error').escape();}};mw.hook('dev.i18n').add($.proxy(DiscordIntegrator.hook,DiscordIntegrator));importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});})();;require(['wikia.window','jquery','mw'],function(window,$,mw){var config=mw.config.get(['wgScriptPath','wgCanonicalSpecialPageName']);if(config.
wgCanonicalSpecialPageName!=='Community'||$('#wiki-manager-module').length){return;}function wikiManagerModule(wds,i18n){var api=new mw.Api();api.get({action:'query',meta:'allmessages',ammessages:'custom-Wiki_Manager'}).done(function(r,s){if(s!=='success'||!r.query){return;}api.get({action:'query',list:'users',ususers:r.query.allmessages[0]['*'],usprop:'groups'}).done(function(r,s){if(s!=='success'||!r.query){return;}var user=r.query.users[0];$.getJSON(config.wgScriptPath+'/api/v1/User/Details',{ids:user.userid,size:50}).done(function(r,s){if(s!=='success'||!r.items){return;}var user2=r.items[0],badge=user.groups.includes('staff')?'staff':user.groups.includes('helper')?'helper':undefined;if(badge){badge={badgeText:badge,badgeMarkup:wds.badge(badge,{width:18}).outerHTML};}require(['wikia.mustache','communitypage.templates.mustache'],function(mustache,templates){$(mustache.render(templates.adminsModule,{topAdminsData:{topAdminsHeaderText:i18n.msg('wiki-manager').plain(),topAdminsList:[{
avatar:'<img src="'+user2.avatar+'">',badge:badge,profilePage:user2.url,userName:user.name}],adminsText:'<a href="https://community.fandom.com/wiki/Help:Wiki_Managers">'+i18n.msg('wiki-manager_desc').escape()+'</a>'}},{topAdmins:templates.topAdmins.replace(/([^{]){{adminsText}}([^}])/,'$1{{{adminsText}}}$2')})).attr('id','wiki-manager-module').insertAfter('.community-page-admins-module');});});});});}$.when(new $.Deferred(function(deferred){if(window.dev&&window.dev.wds){deferred.resolve(window.dev.wds);}else{mw.hook('dev.wds').add(function(wds){deferred.resolve(wds);});importArticle({type:'script',article:'u:dev:MediaWiki:WDSIcons/code.js'});}}),new $.Deferred(function(deferred){if(window.dev&&window.dev.i18n){window.dev.i18n.loadMessages('WikiManager_Nameplate').done(deferred.resolve);}else{mw.hook('dev.i18n').add(function(i18n){i18n.loadMessages('WikiManager_Nameplate').done(deferred.resolve);});importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}}),mw.loader.
using(['mediawiki.api','mediawiki.util'])).done(wikiManagerModule);});;;(function($,mw,Mustache){'use strict';if(window.discRC){return;}if(mw.config.get('wgPageName')===wgFormattedNamespaces[-1]+':DiscussionsRC'){$('h1.page-header__title').text('DiscussionsRC');document.title='DiscussionsRC | '+mw.config.get('wgSiteName')+' | Fandom';$('#WikiaArticle').empty().append($('<div/>',{id:'discrc'}));}if(!$('#discrc').length){return;}var discRC={};discRC.wikis=[];discRC.entries=[];var dRCAPI={};dRCAPI.getWikiVariables=function(apipath,timeout){if(!apipath.match(/\.(fandom|wikia)\.(com|org)/g)){apipath='//'+apipath+'.wikia.com/api.php';}return $.ajax({url:apipath,type:'GET',format:'json',dataType:'jsonp',crossDomain:'true',timeout:timeout?timeout:5000,xhrFields:{withCredentials:!0},data:{action:'query',meta:'siteinfo',siprop:['general','variables'].join('|'),format:'json'}});};dRCAPI.getPosts=function(cityId,limit,page,reported,viewableOnly){return $.ajax({url:
'https://services.fandom.com/discussion/'+cityId+'/posts',type:'GET',format:'json',crossDomain:'true',xhrFields:{withCredentials:!0},data:{limit:limit,page:page,responseGroup:'small',reported:reported,viewableOnly:viewableOnly}});};dRCAPI.getThread=function(cityId,threadId,page,limit,viewableOnly){return $.ajax({url:'https://services.fandom.com/discussion/'+cityId+'/threads/'+threadId,type:'GET',format:'json',crossDomain:'true',xhrFields:{withCredentials:!0},data:{limit:limit,page:page,responseGroup:'full',sortDirection:'descending',sortKey:'creation_date',viewableOnly:viewableOnly}}).then(function(thread){if(Object.prototype.hasOwnProperty.call(thread._embedded,'doc:posts')){thread._embedded['doc:posts'].reverse();}return thread;});};discRC.templates={rcEntry:'<li class="drc-entry">'+'{{^singleWiki}}{{wiki.wiki}} . . {{/singleWiki}}'+
'{{#title}}<span class="drc-new" title="{{newPostTooltip}}"><svg class="wds-icon wds-icon-tiny"><use xlink:href="#wds-icons-{{newPostIcon}}-tiny"></use></svg></span>{{/title}}{{^title}}<span class="drc-reply" title="New reply">R</span>{{/title}} . . '+'(<span class="drc-view" data-city="{{wiki.id}}" data-thread="{{threadId}}"{{^title}} data-reply="{{id}}"{{/title}}><a>view</a></span>) . . '+'<span class="drc-title">{{#title}}<a href="{{wiki.baseUrl}}/f/p/{{threadId}}">{{title}}{{/title}}{{^title}}<a href="{{wiki.baseUrl}}/f/p/{{threadId}}/r/{{id}}">{{threadtitle}}{{/title}}</a></span> '+'on <span class="drc-forumname"><a href="{{wiki.baseUrl}}/f?catId={{forumId}}">{{forumName}}</a></span>; '+'<span class="drc-timestamp">{{creationDate.dateString}}</span> . . '+'<span class="drc-creator"><a href="{{wiki.baseUrl}}/wiki/User:{{createdBy.name}}">{{createdBy.name}}</a></span> '+
'<span class="mw-usertoollinks">(<a href="{{wiki.baseUrl}}/wiki/User talk:{{createdBy.name}}">wall</a> | <a href="{{wiki.baseUrl}}/wiki/Special:Contributions/{{createdBy.name}}">contribs</a> | <a href="{{wiki.baseUrl}}/f/u/{{createdBy.id}}">posts</a> | <a href="{{wiki.baseUrl}}/wiki/Special:Block/{{createdBy.name}}">block</a>)</span> . . '+'<span class="drc-snippet">({{truncatedContent}})</span>'+'</li>',mainPost:'<div class="drc-post-header"><h2>{{post.title}}</h2><div class="drc-post-hlinks">'+'<span class="drc-post-category">in <a href="{{wiki.baseUrl}}/f?catId={{post.forumId}}">{{post.forumName}}</a></span> | '+'<span class="drc-post-dlink"><a href="{{wiki.baseUrl}}/f/p/{{post.id}}">View in Discussions &rsaquo;</a></span></div></div>'+'<div class="drc-post{{#isHighlighted}} drc-post-highlighted{{/isHighlighted}}">'+
'<div class="drc-post-avatar"><img src="{{post.createdBy.avatarUrl}}/zoom-crop/width/40/height/40" srcset="{{post.createdBy.avatarUrl}}/zoom-crop/width/40/height/40, {{post.createdBy.avatarUrl}}/zoom-crop/width/80/height/80 2x"/></div><div class="drc-post-author">{{post.createdBy.name}}'+' &bull; <a href="{{wiki.baseUrl}}/wiki/Special:Contributions/{{post.createdBy.name}}">contribs</a> &bull; <a href="{{wiki.baseUrl}}/f/u/{{post.createdBy.id}}">posts</a></div>'+'<div class="drc-post-date"><a href="{{wiki.baseUrl}}/f/p/{{post.id}}">{{date}}</a></div>'+'<div class="drc-post-content">{{post.rawContent}}</div>'+'</div>',postReply:'<div class="drc-post-reply{{#isHighlighted}} drc-post-highlighted{{/isHighlighted}}">'+
'<div class="drc-post-avatar"><img src="{{post.createdBy.avatarUrl}}/zoom-crop/width/40/height/40" srcset="{{post.createdBy.avatarUrl}}/zoom-crop/width/40/height/40, {{post.createdBy.avatarUrl}}/zoom-crop/width/80/height/80 2x"/></div><div class="drc-post-author">{{post.createdBy.name}}'+' &bull; <a href="{{wiki.baseUrl}}/wiki/Special:Contributions/{{post.createdBy.name}}">contribs</a> &bull; <a href="{{wiki.baseUrl}}/f/u/{{post.createdBy.id}}">posts</a></div>'+'<div class="drc-post-date"><a href="{{wiki.baseUrl}}/f/p/{{post.threadId}}/r/{{post.id}}">{{date}}</a></div>'+'<div class="drc-post-content">{{post.rawContent}}</div>'+'</div>'};discRC.render=function(template,args){return $(Mustache.render(template,args));};discRC.truncate=function(str,limit){return(str.length<limit)?str:str.substring(0,limit).replace(/.$/gi,'...');};discRC.timePad=function(n){return(n<10)?'0'+n:n;};discRC.generatePosts=function(wikis,page){var promises=[];$.each(wikis,function(i,wiki){var promise=dRCAPI.
getPosts(wiki.id,100,page,false,true).done(function(data){if(data._embedded['doc:posts'].length>0){$.each(data._embedded['doc:posts'],function(i,post){var postDate=new Date(post.creationDate.epochSecond*1000);post.creationDate.dateString=discRC.timePad(postDate.getHours())+':'+discRC.timePad(postDate.getMinutes());post.truncatedContent=discRC.truncate(post.rawContent,50);if(post.title===null){post.threadtitle=post._embedded.thread[0].title;}else{switch(post.funnel){case'LINK':post.newPostIcon='link';post.newPostTooltip='New link post';break;case'IMAGE':post.newPostIcon='image';post.newPostTooltip='New image post';break;case'POLL':post.newPostIcon='poll';post.newPostTooltip='New poll post';break;default:console.warn('Unexpected funnel type "%s" for post %s',post.funnel,post.threadId);case'TEXT':post.newPostIcon='text';post.newPostTooltip='New text post';break;}}post.wiki=wiki;post.singleWiki=wikis.length===1;discRC.entries.push({time:postDate,entry:discRC.render(discRC.templates.rcEntry
,post)});});}else{$('#discrc').prepend('Discussions is not available on the wiki '+encodeURIComponent(wiki.wiki)+' or there are no posts.');}}).fail(function(){$('#discrc').prepend('Discussions is not available on the wiki <b>'+encodeURIComponent(wiki.wiki)+'.wikia.com.</b>');});promises.push(promise);});$.when.apply(null,promises).then(function(){discRC.showAllPosts();});};discRC.showAllPosts=function(){$('#discrc').append('<ul id="discrc-list"></ul>');discRC.entries.sort(function(a,b){return a.time>b.time?-1:1;});var currDate=new Date(1900,1,1);$.each(discRC.entries,function(i,e){if(currDate.getDate()!==e.time.getDate()||currDate.getMonth()!==e.time.getMonth()||currDate.getFullYear()!==e.time.getFullYear()){$('#discrc-list').append('<h2>'+e.time.getDate()+' '+wgMonthNames[e.time.getMonth()+1]+' '+e.time.getFullYear()+'</h2>');}$('#discrc-list').append(e.entry);currDate=e.time;});};discRC.events=function(){$('#discrc').on('click','.drc-view',function(){var cityId=$(this).attr(
'data-city');var wiki=discRC.wikis.filter(function(wiki){return wiki.id===cityId;})[0];var threadId=$(this).attr('data-thread');var replyId=$(this).attr('data-reply');dRCAPI.getThread(cityId,threadId,0,100,false).then(function(thread){var date=new Date(thread.creationDate.epochSecond*1000);date=discRC.timePad(date.getHours())+':'+discRC.timePad(date.getMinutes())+', '+date.getDate()+' '+wgMonthNames[date.getMonth()+1]+' '+date.getFullYear();if(!thread.createdBy.avatarUrl){thread.createdBy.avatarUrl='https://vignette.wikia.nocookie.net/messaging/images/1/19/Avatar.jpg/revision/latest';}$('#drc-view-post-'+threadId).append(discRC.render(discRC.templates.mainPost,{post:thread,wiki:wiki,date:date,isHighlighted:(replyId===undefined)}));if(!Object.prototype.hasOwnProperty.call(thread._embedded,'doc:posts')){return;}$.each(thread._embedded['doc:posts'],function(i,post){var date=new Date(post.creationDate.epochSecond*1000);date=discRC.timePad(date.getHours())+':'+discRC.timePad(date.getMinutes
())+', '+date.getDate()+' '+wgMonthNames[date.getMonth()+1]+' '+date.getFullYear();if(!post.createdBy.avatarUrl){post.createdBy.avatarUrl='https://vignette.wikia.nocookie.net/messaging/images/1/19/Avatar.jpg/revision/latest';}$('#drc-view-post-'+threadId).append(discRC.render(discRC.templates.postReply,{post:post,wiki:wiki,date:date,isHighlighted:(post.id===replyId)}));});var highlightedPost=document.querySelector('#drc-view-post-'+threadId+' .drc-post-highlighted');if(highlightedPost!==null){highlightedPost.scrollIntoView({block:'center'});}});$.showCustomModal('','<div id="drc-view-post-'+threadId+'"></div>',{id:'drc-view-post',width:600,buttons:[],callback:function(wrapper){wrapper.find('button.close.wikia-chiclet-button > img').replaceWith('<svg class="wds-icon"><use xlink:href="#wds-icons-close"></use></svg>');}});});};discRC.init=function(){$('#discrc').empty();var loadWikiList=$('#discrc').data('wiki');var wikiLoadPromises=[];if(loadWikiList){$.each(loadWikiList.split(','),
function(i,wiki){var promise=dRCAPI.getWikiVariables(wiki).done(function(data){discRC.wikis.push({id:$.grep(data.query.variables,function(e){return e.id==='wgCityId';})[0]['*'],baseUrl:data.query.general.server+data.query.general.scriptpath,wiki:data.query.general.wikiid,name:data.query.general.sitename});}).fail(function(){$('#discrc').prepend('An error occurred: Wiki <b>'+encodeURIComponent(wiki)+'.wikia.com</b> not found.<br/>');});wikiLoadPromises.push(promise);});}else{discRC.wikis.push({id:mw.config.get('wgCityId'),baseUrl:mw.config.get('wgServer')+mw.config.get('wgScriptPath'),wiki:mw.config.get('wgDBname'),name:mw.config.get('wgSiteName')});}importArticles({type:'style',articles:['u:dev:MediaWiki:DiscussionsRC.css',]});(function(){var modalWrapper=document.createElement('div');modalWrapper.className='modalWrapper';var speechBubbleMessage=document.createElement('div');speechBubbleMessage.className='speech-bubble-message current';var speechBubble=document.createElement('div');
speechBubble.className='SpeechBubble';speechBubble.appendChild(speechBubbleMessage);var sandbox=document.createElement('div');sandbox.style.display='none';sandbox.appendChild(modalWrapper);sandbox.appendChild(speechBubble);document.body.appendChild(sandbox);var headerBackgroundColor=getComputedStyle(modalWrapper).backgroundColor;var highlightBackgroundColor=getComputedStyle(speechBubbleMessage).backgroundColor;document.body.removeChild(sandbox);var generatedStyles=document.createElement('style');generatedStyles.appendChild(document.createTextNode('.drc-post-header{background-color:'+headerBackgroundColor+';}'+'.drc-post-highlighted{background-color:'+highlightBackgroundColor+';}'));document.head.appendChild(generatedStyles);}());$.get(mw.config.get('wgExtensionAssetsPath')+'/wikia/DesignSystem/node_modules/design-system/dist/svg/sprite.svg').done(function(svgDocument){$('body').prepend(svgDocument.rootElement);});$.when.apply(null,wikiLoadPromises).always(function(){discRC.
generatePosts(discRC.wikis,0);discRC.events();})};discRC.init();window.discRC=discRC;})(jQuery,mediaWiki,Mustache);;;mw.loader.state({"wikia.fake.articles.c6ddc834da0701b3d5a618f835d02262":"ready"});

/* cache key: animalcrossing:resourceloader:filter:minify-js:7:8bea47e4b08a0c1ba7e90df36ceb6fb4 */